# å°åˆ·å­æ‰“ç¢¼æœå‹™ - è‡ªå»ºé©—è­‰ç¢¼è§£æ±ºæ–¹æ¡ˆ

> **ä¾†æº**: [@0xbrush_bots](https://x.com/0xbrush_bots/status/1912837119313322058) | [åŸæ–‡é€£çµ](https://github.com/Brush-Bot/brush-captcha)
>
> **æ—¥æœŸ**: 
>
> **æ¨™ç±¤**: `é©—è­‰ç¢¼ç ´è§£` `é–‹æºå·¥å…·` `åˆ†å¸ƒå¼æ¶æ§‹`

---

![](../assets/dev/052-brush-captcha-self-hosted-verification-1.png)

> **ä¾†æº**: [@0xbrush_bots (å°åˆ·å­)](https://github.com/Brush-Bot/brush-captcha)
> **æ—¥æœŸ**: 2025-04-18
> **æ¨™ç±¤**: `é©—è­‰ç¢¼` `è‡ªå‹•åŒ–` `æ‰“ç¢¼æœå‹™` `Turnstile` `hCaptcha` `Camoufox`

---

## å°ˆæ¡ˆæ¦‚è¿°

brush-captcha æ˜¯åŸºæ–¼ Camoufox æŒ‡ç´‹å½è£æ–¹æ¡ˆçš„è‡ªå»ºæ‰“ç¢¼å¹³å°,åŒ…å«å‰ç«¯é é¢ã€å¾Œç«¯ API æœå‹™å’Œåˆ†æ•£å¼æ‰“ç¢¼å®¢æˆ¶ç«¯,æ”¯æ´å¤šå¯¦ä¾‹ä¸¦è¡Œé‹è¡Œã€‚å®Œå…¨æŒ‰ç…§ Capsolver ä»‹é¢å¯¦ç¾,èƒ½å®Œç¾ç›¸å®¹å°åˆ·å­ Capsolver æ‰“ç¢¼ã€‚

## ç‚ºä»€éº¼éœ€è¦è‡ªå»ºæ‰“ç¢¼æœå‹™

### æ‰“ç¢¼æˆæœ¬å•é¡Œ

é©—è­‰ç¢¼ä½œç‚ºäººæ©Ÿæª¢æŸ¥æ‰‹æ®µ,å„ç¨®å¹³å°çš„ã€Œæ””æˆªå™¨ã€è®“ä½¿ç”¨è€…éœ€è¦é»æ“ŠæŒ‰éˆ•æˆ–æ‹–å‹•åœ–ç‰‡ç­‰æ“ä½œã€‚å¸‚å ´ä¸Šçš„æ‰“ç¢¼å¹³å°(å¦‚ Capsolverã€2Captcha)é›–ç„¶èƒ½ç¹éé©—è­‰,ä½†ä¸¦éå…è²»ã€‚

**æˆæœ¬è¨ˆç®—ç¯„ä¾‹**:
- 100 å€‹å¸³è™Ÿ,æ¯ 24 å°æ™‚æ‰“ç¢¼ä¸€æ¬¡
- æŒ‰ Capsolver å¹³å°å–®æ¬¡å–®è™Ÿè²»ç”¨è¨ˆç®—
- æŒçºŒä½¿ç”¨æˆæœ¬: $10-$20/å¤©
- é‡åˆ°å¤§é‡ã€Œé ˜æ°´ã€å°ˆæ¡ˆæ™‚æˆæœ¬æ›´é«˜

### è§£æ±ºæ–¹æ¡ˆ

é–‹æºè‡ªå»ºæœå‹™è®“æ‰“ç¢¼æˆæœ¬å¤§å¹…é™ä½,åªéœ€ 99 å…ƒé¨°è¨Šé›²è¼•é‡ä¼ºæœå™¨å³å¯ä¸€éµå•Ÿå‹•ã€‚

## ç‰ˆæœ¬è¨˜éŒ„

| ç‰ˆæœ¬è™Ÿ | æ—¥æœŸ | æ›´æ–°å…§å®¹ | å‚™è¨» |
|--------|------|----------|------|
| v1.1.0 | 2025-04-18 | 1. ä½¿ç”¨éœæ…‹ä»£ç†æ‰“ç¢¼,ç”± server ç«¯çµ±ä¸€æ’ç¨‹<br>2. å¢åŠ  server é‘‘æ¬Šæ©Ÿåˆ¶<br>3. æ”¯æ´ hCaptcha(Gemini æ‰“ç¢¼)<br>4. æœ€ä½³åŒ– Turnstile æ•ˆèƒ½<br>5. ä»»å‹™æ’ç¨‹æœ€ä½³åŒ– | é—œéµåŠŸèƒ½å‡ç´š |
| v1.0.0 | - | é¦–å€‹æ­£å¼ç‰ˆæœ¬ç™¼å¸ƒ,åƒ…æ”¯æ´ Turnstile å’Œå‹•æ…‹ IP æ‰“ç¢¼ | åˆå§‹ç©©å®šç‰ˆæœ¬ |

## é©—è­‰ç¢¼æ”¯æ´æƒ…æ³

| é©—è­‰ç¢¼é¡å‹ | æ”¯æ´ç‹€æ…‹ | èªªæ˜ |
|-----------|---------|------|
| Turnstile | âœ… æ”¯æ´ | - |
| hCaptcha | âœ… æ”¯æ´ | æ•´åˆ QIN2DIM/hcaptcha-challenger,éœ€ Gemini API Key(æ•ˆèƒ½å¾…æœ€ä½³åŒ–) |
| ReCaptchaV2 | ğŸš§ è¨ˆåŠƒæ”¯æ´ | ç•¶å‰åƒ…æ”¯æ´ Turnstile |
| ReCaptchaV3 | ğŸš§ è¨ˆåŠƒæ”¯æ´ | éœ€æ¨¡æ“¬ä½¿ç”¨è€…è¡Œç‚º,æœªæ•´åˆ |
| FunCaptcha | âŒ ä¸æ”¯æ´ | çµæ§‹è¤‡é›œ,æš«ä¸æ”¯æ´ |
| Geetest | âŒ ä¸æ”¯æ´ | ç„¡äº’å‹•å…ƒä»¶æ¨¡æ“¬é‚è¼¯ |
| ImageToText | âŒ ä¸æ”¯æ´ | ä¸è™•ç†ç´”æ‰“ç¢¼åœ–ç‰‡ |
| RotateCaptcha | âŒ ä¸æ”¯æ´ | éœ€æ¨¡æ“¬æ—‹è½‰äº’å‹• |
| SlideCaptcha | âŒ ä¸æ”¯æ´ | ç¼ºä¹æ»‘å‹•è¡Œç‚ºæ¨¡æ“¬ |

## å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ backend/              # Server:æä¾›é‘‘æ¬Šã€ä»»å‹™æ’ç¨‹èˆ‡ WebSocket æœå‹™
â”œâ”€â”€ frontend/             # ç®¡ç†é é¢:React + Ant Design
â”œâ”€â”€ client/               # åˆ†æ•£å¼æ‰“ç¢¼å®¢æˆ¶ç«¯(åŸºæ–¼ Camoufox)
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

## éƒ¨ç½²æŒ‡å—

### ç’°å¢ƒæº–å‚™

- Python 3.11+
- Node.js 20+
- Docker & Docker Compose
- Nginx(å»ºè­°éƒ¨ç½² SSL)
- Gemini API Key(å¦‚ä½¿ç”¨ hCaptcha)

### Server ç«¯èˆ‡å‰ç«¯é é¢éƒ¨ç½²

1. **Clone å°ˆæ¡ˆ**
```bash
git clone https://github.com/Brush-Bot/brush-captcha.git
cd brush-captcha
```

2. **æº–å‚™è¨­å®šæª”** (æ”¾å…¥ `tmp/` ç›®éŒ„)
   - `proxies.txt`: ä»£ç† IP åˆ—è¡¨,ä¸€è¡Œä¸€æ¢,æ”¯æ´å¤šç¨®æ ¼å¼(åŒ…æ‹¬ `user:pass@ip:port`)
   - `user_keys.txt`: ä½¿ç”¨è€… Key åˆ—è¡¨,å¯ç›´æ¥å¡«å¯« Gemini API Key
   - `*.crt / *.key / *.pem`: SSL è­‰æ›¸(æ”¯æ´è‡ªå‹•æ‹†åˆ†è¾¨è­˜)
   - `nginx.conf.template / nginx.ssl.template`: Nginx æ¨¡æ¿

3. **ç”¢ç”Ÿè‡ªç°½è­‰æ›¸**(ç¯„ä¾‹)
```bash
openssl req -x509 -newkey rsa:2048 -nodes \
  -keyout server.key -out server.crt -days 365 \
  -subj "/C=CN/ST=Beijing/L=Beijing/O=MyCompany/OU=Dev/CN=localhost"
```

4. **åŸ·è¡Œå®‰è£æŒ‡ä»¤ç¢¼**
```bash
bash install_server_and_frontend.sh
```

### Client ç«¯éƒ¨ç½²

1. **è¨­å®šæª”æ¡ˆ**
```bash
cd client
nano config.yaml
```

2. **è¨­å®šç¯„ä¾‹**
```yaml
# ä¸¦è¡Œæ•¸è¨­å®š(å¯é¸,ä¸å¡«å‰‡è‡ªå‹•æ ¹æ“šç³»çµ±è³‡æºè¨ˆç®—)
concurrency: null

# Camoufox åƒæ•¸è¨­å®š
camoufox:
  # ç•¶å‰è£ç½®æ”¯æ´çš„æ‰“ç¢¼é¡å‹,æ”¯æ´çš„é¡å‹ server ç«¯æ‰æœƒåˆ†é…ä»»å‹™
  solver_type:
    - HcaptchaCracker
    - AntiTurnstileTaskProxyLess
  # ç„¡é ­æ¨¡å¼,é è¨­é–‹å•Ÿå³å¯
  headless: "true"

worker:
  # ç•¶å‰è£ç½®åç¨±
  name: "test"
  # å¾Œç«¯ api ä½å€,æ›¿æ› ip å’Œ port å³å¯
  # å¦‚æœæ²’æœ‰è¨­å®š ssl,å”å®šé ­æ”¹æˆ ws
  # åˆ‡è¨˜ä¸èƒ½ç”¨ 127.0.0.1 å’Œ localhost
  wss_url: "wss://ip:8080/ws/worker/"
```

3. **å•Ÿå‹•**
```bash
docker compose up -d
```

### æ³¨æ„äº‹é …

- æ˜ åƒæª”è¼ƒå¤§,é¦–æ¬¡å»ºç½®éœ€è€å¿ƒç­‰å¾…
- è«‹ç¢ºä¿ä»£ç†é€£é€šæ€§(ç§‘å­¸ä¸Šç¶²)
- é è¨­ç›£æ§ä½å€: `http://{ip}:8080`(é è¨­å¸³è™Ÿå¯†ç¢¼å‡ç‚º `admin`)

## æ‰‹å‹•éƒ¨ç½²æ–¹å¼

### Backend éƒ¨ç½²

```bash
cd backend
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
uvicorn main:app --host 0.0.0.0 --port 8000
```

æˆ–ä½¿ç”¨ Docker:
```bash
docker build -t brush-backend ./backend
docker run -d -p 8000:8000 brush-backend
```

### Frontend éƒ¨ç½²

```bash
cd frontend
npm install
npm run build

# æœ¬åœ°é è¦½(å¯é¸)
npm install -g serve
serve -s dist -l 3000
```

æ¨è–¦ä½¿ç”¨ Nginx é€²è¡Œåå‘ä»£ç†éƒ¨ç½²ã€‚

### Client éƒ¨ç½²

```bash
cd client
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
python run_client.py
```

## Nginx è¨­å®šç¯„ä¾‹

```nginx
server {
    listen 8998 ssl;
    server_name yourdomain;
    
    ssl_certificate /path/to/server.crt;
    ssl_certificate_key /path/to/server.key;
    
    location / {
        root /path/to/frontend/dist;
        index index.html;
        try_files $uri /index.html;
    }
    
    location /api/ {
        proxy_pass http://127.0.0.1:8000/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    location /ws/ {
        proxy_pass http://127.0.0.1:8000/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

## å¾ŒçºŒè¨ˆåŠƒ

- âœ… æ”¯æ´æ›´å¤šé©—è­‰ç¢¼é¡å‹(ReCaptchaã€FunCaptcha)
- âš™ï¸ å¼•å…¥æ‰“ç¢¼ç¯€é»å„ªå…ˆé †åºæ’ç¨‹ç­–ç•¥
- ğŸ“ˆ å¢åŠ æ‰“ç¢¼æˆåŠŸç‡çµ±è¨ˆæ¨¡çµ„

## å°ˆæ¡ˆè³‡è¨Š

- **GitHub**: https://github.com/Brush-Bot/brush-captcha
- **é¦–ç‰ˆå¯¦ä½œ**: @web3anan123
- **æ”¯æ´**: æ­¡è¿æäº¤ Issues æˆ– PR
