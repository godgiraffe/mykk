# 交易所套利總結框架

> **來源**: [@dan326714](https://x.com/dan326714/status/1913511492680630581) | [原文連結](https://ten-kilogram-fc0.notion.site/1dad94f5c31c80a6b21fe0ae0486f0db?pvs=73)
>
> **日期**: Sat Apr 19 08:34:25 +0000 2025
>
> **標籤**: `交易所套利` `套利策略` `量化交易`

---

好的，我已經成功獲取到 Notion 頁面的完整內容。現在讓我為您整理成 markdown 格式的知識庫文章：

---

> **來源**: [@dan326714 (十年一夢)](https://x.com/dan326714)
> **日期**: 2025-02-18
> **標籤**: `套利` `合約交易` `費率套利` `量化交易`

---

交易所套利能做的其實不多，主要包含以下幾種：

1. 衝開盤
2. 套費率
3. 接針
4. 老幣異動
5. 異常監控
6. 交易所幣種相關性分析
7. 根據消息買入

## 衝開盤

衝開盤主要有兩種方式：

### 1. 開盤高價賣出

使用 GTC 模式掛單高價賣出。但如果沒有盤前交易數據，且缺乏項目評估能力，就很難對標的進行準確定價。由於難以套保，需要買入現貨，不建議。

### 2. 開盤低價買入

在知道某個價格後，使用 IOC 模式以 1/10 的價格發送訂單。具體操作是將訂單拆分成 10 份，在開盤前 1 秒按特定頻率發送,爭取成為第一筆成交。

這種策略最大的挑戰是網絡延遲。要讓機器人在開盤時第一時間發出訂單，關鍵是伺服器要盡可能靠近目標交易所伺服器。這樣數據傳輸只需經過本地路由器，無需經過城域網，可以實現區域網路級別的低延遲。

整個過程的節奏類似於 `[- . - . - . - .]`，其中 `-` 表示發送請求，`.` 表示程式暫停。

### 交易的幾種模式

**time_in_force: Time in force 策略**

- **gtc**: GoodTillCancelled
- **ioc**: ImmediateOrCancelled，立即成交或者取消，只吃單不掛單
- **poc**: PendingOrCancelled，被動委託，只掛單不吃單
- **fok**: FillOrKill，全部成交或者全部取消

## 套費率

對於沒有編程能力的人最適合套費率，只要你夠努力，就有錢賺。

### 案例 1

默默老師在費率套利方面展現了高超智慧。去年行情好時，他同時操作 140 多個幣種，採用統一帳戶開槓桿套利。由於現貨可作為合約保證金，基本沒有爆倉風險。即便個別幣種出現異常波動也無需擔心，只需要定期關注，不會耗費太多精力。

### 案例 2

當下市場的套費率機會依然很好，小資金操作得當甚至可以超越默默老師當時的收益率。不過，現在市場上套費率的標的多是波動劇烈（很妖）的幣種，操作難度大幅提升，需要持續監控。

目前市場環境下不宜加槓桿，應該降低槓桿至 0.2x 或 0.4x（總倉位），且只能操作 1～2 個品種才能確保妥善管理。對於默默老師這樣的大資金量而言，現在的市場環境並不合適，因為要找到幾十個負費率的幣種並頻繁調整倉位實在太耗費精力，這也體現了默默老師當初的選擇非常明智。

## 費率機制

對於合約或國內期貨，都有固定的期限，即平倉日期。國內期貨市場經常出現逼倉行為，導致上訪等現實問題。如果合約沒有期限且沒有費率約束，交易者可能會肆意操作，造成買賣差價達到幾十個點之大。

基於這些歷史經驗，費率機制的設計目的是增加市場流動性，畢竟合約本質是雙方的約定。

### 合約做空，買入現貨

1. 在市場火爆時，多頭佔據主導，空頭成為弱勢群體。由於槓桿作用，合約價格往往高於現貨。如果沒有費率補償機制，空頭會更少，因此可以透過買入現貨同時開空合約來獲利。

2. 當空頭想平倉時，需要以高於市場價格買回合約。如果沒有費率控制機制，這種交易很難成交。有了正費率機制後，就能約束多頭大戶，因為不及時平倉會導致本金損失。

**舉例說明**：以 8 元價格開空合約，同時以 7 元價格買入現貨。此時費率為正，意味著在吃費率。假設現貨價格保持在 7 元，而合約價格下跌至 6.5 元，費率就會轉為負數，這時必須平倉。在這個過程中不會出現虧損：當合約價格維持在 7 元以上時，費率通常不會為負；最終的盈利來自合約部分（8-6.5），而現貨部分收支相抵。

### 合約做多，賣出現貨

1. 當多頭急需資金平倉時，他們會以低於市場價的價格賣出，此時費率轉為負數。空頭此時平倉可以吃到溢價，但如果不及時平倉，就需要支付費率。

2. 另一種情況是市場上只有空頭，沒有多頭，導致無法撮合交易。這時多頭實際上是被動開倉，而費率則作為一種補償機制。

**舉例說明**：以 7 元價格開多合約，同時以 8 元價格賣出現貨。此時費率為負，你在吃費率。為簡化說明價格機制，假設合約價格維持在 7 元，但現貨價格下跌至 6.5 元時，費率會轉為正數，這時就必須平倉。在整個過程中你不會虧損，因為雖然合約沒有盈利，但借貸部分獲得了 1.5 元的收益。

### 合約做多，合約做空

沒有機制保護，全看交易所指數計算，很坑，主動權交給了別人。現貨價格低，合約價格高，費率是負的，吃差價虧費率，吃費率虧差價，而且持續的時間未知，所以大機率是虧損的。而且市場很多時候是[不可預測](https://x.com/rnmumu3/status/1899707976438448293?s=46)。

套利是不可預測的，當你去套費率，你不知道費率什麼時候結束。

1. 在鏈上購買的時候我喜歡交易所一直在拉，每當我買了後，就開始下跌，織布機行情我肯定是虧損的。[參考推文](https://x.com/rnmumu3/status/1911094228429750727)

2. 費率只要不觸發虧損或者小額虧損是可以一直拿著的，[例如](https://x.com/0x10240/status/1914240764768587863)

3. 開倉時候為了套保，後來給某些價格差，[參考](https://x.com/zhamomo666/status/1904922257576935762)

### 合約的缺點

1. **費率侵蝕本金**：價格沒變，波動沒有，費率 2 小時 -2%，你開了 1X，一天吃你 24% 本金。

2. **合約爆倉風險**：交易所保證金不夠了，還不能平倉的話，需要調用資金。野莊拉盤可能就 1 分鐘直接幾倍，所以給你爆了。
   - 需要跨交易所轉帳，轉帳走鏈上這裡很考驗預判和效率，鏈卡了
   - 鏈上充值入帳時間久
   - 買 U 入金效率也很慢

3. **ADL 減倉機制**：這個機制是很迷的，如果不減倉只能是市商接盤，那就是 jelly 的故事，如果市商不接盤，就是 ADL。在減倉的時候如果給你減倉的價格是對的還好，如果某種機制導致你被 ADL 的時候價格機制與費率不符合，就會虧損，比如現貨 7 元合約 8 元，費率為負數，給你 ADL 了，你賣出現貨也是虧的。不要太相信系統。可以設計成：
   - 槓桿優先
   - 大戶優先（隨機減少一部分）
   - VIP 等級優先（等級低先減少）
   - 隨機機制
   - 黑白名單機制

4. **合約費率計算**：正常情況都是來自多方，如果僅僅一方很容易被單個大戶控費率

5. [其他問題彙總](https://x.com/rnmumu3/status/1887196675384782867)

6. **中心化權限**：很多幣都有中心化權限，有的幣可以暫停時間段交易

### 跨交易所套費率

爆倉風險、ADL 風險，做的話建議低槓桿，需要保證一方爆倉可能為 0。

1. A 交易所現貨，B 交易所合約開空，隨時向 B 調用資金
2. A 交易所合約做多，B 交易所借貸，隨時向借貸帳戶補充保證金

## 接針

### 接針邏輯

1. 很多人喜歡底部追空，一個極速拉升，很多人就爆倉了，導致合約高位買入，但是現貨沒有跟上，這個時候使用代碼進行合約開空，現貨買入，就能吃到差價。

2. 很多人喜歡頂部追多，一個極速暴跌被清算，底部被賣出，也是現貨沒跟上，這個時候使用代碼進行合約開多，現貨借幣賣出，就能吃到差價。

### 接針問題

1. 閾值判斷
2. 倉位管理/爆倉控制，交易所可以查詢保證金率
3. 開關倉資金利用問題
4. 方向問題：價格上漲，先買現貨後開空；價格下跌，先借幣，後開多

## 老幣異動、異常監控

這個我在做，也在調整，這個閾值很難調整，這裡先不介紹，等我做好了，再來分析。

## 交易所幣種相關性分析

也在分析如何去做，如何科學的方式找出來。
