# CCXT 隱藏 Broker ID 返傭問題 — 開源工具的隱性成本

> **來源**: [@traderwanwan](https://x.com/traderwanwan/status/1927711506424078452)
>
> **日期**: Wed May 28 13:00:12 +0000 2025
>
> **標籤**: `量化交易` `API 返傭` `開源漏洞`

---

> **來源**: [@traderwanwan (Wan 萬萬)](https://twitter.com/traderwanwan)  
> **標籤**: `CCXT` `量化交易` `Broker ID` `返佣` `開源工具`

---

## 背景：什麼是 Broker ID

當我們透過交易所 API 進行程式交易時，可以夾帶不同的參數，包括幣種、價格、訂單種類等。其中有一個欄位就可以填入 **broker id**。

Broker ID 就像是程式交易的邀請碼一樣。在常見的主流交易所裡，它的效力是**低於拉新推薦碼**的。大概分配比例會如下：

### 返佣比例說明

**情況 1：交易者 A「沒有使用推薦碼」**

在 API 送單時代入你的 broker id，可以拿 10%-40% 不等返傭。

**情況 2：交易者 B「用了某人的推薦碼」**

手續費會按照原本比例給推薦人，剩下的比例可以拿大約 10%，完全不會影響推薦人權益。

這是非開發者不會知道的規則，但存在即合理。

## 規則設計漏洞

@sunlc_crypto 則有提到少數狀況會**壓迫到推薦人的返傭**，我認為是交易所規則設計上的漏洞，不應該讓推廣雙方互打。

本來應該是共贏，卻弄得有點難看，就如同這次的瓜。

---

## CCXT 隱藏 Broker ID 爭議

> 以下引用 @sunlc_crypto 的完整內容

### 《CCXT 可能已經默默的偷取了數千萬 U》

昨天發了的推引起量化圈的震動，幾乎大家都不知道 CCXT 在偷偷幹這勾當。

我粗算了下這兩個月光 HL、KUCOIN、BYBIT 三個所就偷走了我大約 15000U 的手續費返傭，1 年下來可能得接近 10W U。如果按整個幣圈來算，3 年下來偷取的手續費可能幾千萬甚至上億 U，**絕對比幣圈大部分項目方都賺錢，完全脫離了開源的本質**。

### GitHub Issue 被關閉

昨天我在 github issue 發文說了這個問題，官方 DEV 直接以「開源的你可以改，自己不改」為由，close 了 issue 並且關閉評論。也難怪這麼多年一直沒人提這事，原來都被封口了。

然後今天突然發現我的推下面出現很多洗地的號，口徑也都是和官方 DEV 一樣，反正開源的出事你自己承擔。

### Broker ID 藏得很深

我是不會改開源代碼嗎？是 TM 這些 broker id **藏得很深**啊。

CCXT 每個交易所的代碼都是幾千行，每個交易所帶的參數都不一樣：
- 有的藏在 `sign` 方法裡
- 有的藏在 `create order` 裡
- 有的藏在 `header` 裡

別說你根本不知道有 broker 這回事，就算知道，如果不是很仔細的看過每一行代碼，都不一定能找出來。

### 缺乏透明度才是問題

CCXT 有反佣是在頁面上寫清楚的，大家可以自己選擇使用無可厚非。但是**私帶 broker id 從來沒有在官方任何的網頁和文檔裡說過，提出問題的人也被刪帖了，這不是偷竊是什麼？？？**

看了一下 GitHub 更新記錄，broker id 應該是在 **2022 年 CCXT Pro 版本從收費改成免費以後，全部帶上的**。所以這個世界上，也許免費的才是最貴的。

### 其他開源工具也有類似問題

這件事觸動的利益極大，甚至我看了其他如 **Hummingbot** 等開源的代碼也帶了（有沒有告知用戶我沒去核實），但至少代碼是寫在非常醒目的位置不難發現，不像 CCXT 藏得那麼深。

為了便於大家定位和修改問題，我把常用的交易所代碼都貼出來給大家看一下：（原推文包含代碼截圖）

---

## 關鍵要點

1. **Broker ID 是合理機制**：作為程式交易的返傭機制，本身並無問題
2. **透明度才是核心**：CCXT 私自在代碼中隱藏 broker id，且未在文檔中說明，這才是爭議所在
3. **開源 ≠ 免責**：雖然是開源項目，但刻意隱藏關鍵參數並刪除相關 issue，違背開源精神
4. **免費的代價**：CCXT Pro 從收費轉免費後，可能透過隱藏 broker id 獲取大量返傭
5. **影響範圍廣**：粗估幣圈整體 3 年可能被抽取數千萬至上億 U 的手續費返傭
