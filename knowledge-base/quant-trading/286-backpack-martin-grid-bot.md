# Backpack 全自動現貨馬丁策略交易機器人

> **來源**: [@gch_enbsbxbs](https://x.com/gch_enbsbxbs/status/1904821594951999952) | [原文連結](https://github.com/cryptocj520/backpack2)
>
> **日期**: Wed Mar 26 09:03:52 +0000 2025
>
> **標籤**: `馬丁策略` `自動交易` `現貨交易`

---

從 git status 可以看到最新的量化交易文章是 285，所以下一篇應該是 286。讓我整理這篇文章：

```markdown
> **來源**: [@gch_enbsbxbs (C J)](https://x.com/gch_enbsbxbs)  
> **日期**: 2026-02-18  
> **標籤**: `量化交易` `馬丁策略` `Backpack` `現貨交易` `自動化交易` `AI 寫代碼`

---

## 專案簡介

我花了 2 天時間用 AI 寫的 Backpack 全自動現貨馬丁策略腳本已經寫好了，參考的馬丁策略也和 DLMM 池的抄底原理類似。

**核心邏輯**：設定好價格範圍，越跌越買，跌得越多買得越多（當然也可以買相同金額，不倍投）。反彈盈利了就止盈，止盈之後重新啟動新一輪週期，反覆這個過程。

所有參數都可以自定義：價格範圍、抄底金額、止盈百分比等等。具體看說明文檔。

**GitHub 專案**: [cryptocj520/backpack2](https://github.com/cryptocj520/backpack2)

## 開發動機

之所以寫這個腳本是因為之前看到 @Mark_XZZ 提過想做背包的網格交易，我也來了興趣。之前跟茶老師 @mdzzi 吃飯深入交流過 Backpack 交易所，也準備擼一下，就設計了這麼個策略。我想做 BTC 的現貨馬丁策略，問題不大。

**注意**：以上腳本沒有做長時間運行測試，我目前測試了 4 個小時跑了幾輪沒問題。想要運行的朋友切記先小資金測試，如果想要什麼個性化功能，把腳本丟到 AI 裡面自己改即可。

## 系統架構

### 檔案結構

```
├── start_auto_trading.js              # 主啟動腳本
├── test_create_orders_auto.js         # 交易執行腳本
├── backpack_trading_config.json       # 配置檔案
├── backpack_exchange-main/            # Backpack API 客戶端
│   └── backpack_client.js
└── logs/                              # 日誌目錄
    ├── trading_YYYY-MM-DD.log         # 交易日誌
    ├── error_YYYY-MM-DD.log           # 錯誤日誌
    └── auto_trading_cycle_YYYY-MM-DD.log  # 交易週期日誌
```

### 配置檔案說明

`backpack_trading_config.json` 包含以下配置項：

```json
{
  "trading": {
    "tradingCoin": "BTC",              // 交易幣種
    "initialPrice": 50000,             // 初始價格
    "takeProfitPercentage": 5,         // 止盈百分比
    "maxDropPercentage": 10,           // 最大跌幅百分比
    "totalAmount": 1000,               // 總投資金額（USDC）
    "orderCount": 5,                   // 買入次數
    "incrementPercentage": 10          // 每次買入遞增百分比
  },
  "actions": {
    "autoRestartAfterTakeProfit": true,  // 止盈後是否自動重啟
    "autoRestartNoFill": true,           // 無訂單成交是否自動重啟
    "autoCancelOrders": true             // 是否自動取消未成交訂單
  },
  "advanced": {
    "noFillRestartMinutes": 60,        // 無訂單成交重啟等待時間（分鐘）
    "orderCheckInterval": 600000,      // 訂單檢查間隔（毫秒）
    "priceCheckInterval": 60000,       // 價格檢查間隔（毫秒）
    "maxRetries": 3                    // 最大重試次數
  }
}
```

### 腳本功能說明

#### 1. start_auto_trading.js
主啟動腳本，負責：
- 啟動交易腳本
- 監控腳本運行狀態
- 自動重啟功能
- 處理進程終止信號

#### 2. test_create_orders_auto.js
交易執行腳本，包含：
- 訂單創建邏輯
- 價格監控
- 止盈處理
- 風險控制
- 訂單狀態更新

#### 3. backpack_client.js
Backpack 交易所 API 客戶端，處理：
- API 認證
- 訂單操作
- 帳戶查詢
- 市場數據獲取

## 工作原理

### 啟動流程
1. 讀取配置檔案
2. 啟動交易腳本
3. 開始監控價格和訂單

### 交易策略
1. 在初始價格基礎上，按遞增比例創建多個買入訂單
2. 監控訂單成交情況
3. 達到止盈目標時自動賣出
4. 超過最大跌幅時自動止損

### 風險控制
- 設置最大跌幅限制
- 自動取消未成交訂單
- 定期檢查訂單狀態
- 異常情況自動重啟

### 自動重啟機制
- 止盈後自動重啟
- 無訂單成交自動重啟
- 異常退出自動重啟

## 使用方法

### 配置設置
```bash
# 編輯配置檔案
nano backpack_trading_config.json
```

### 啟動程式
```bash
# 啟動自動交易
node start_auto_trading.js
```

### 監控運行
- 查看控制台輸出
- 檢查日誌檔案
- 監控訂單狀態

### 停止程式
- 按 Ctrl+C 優雅退出
- 程式會自動取消所有未成交訂單

## 注意事項

### 風險提示
- 請確保理解交易策略
- 合理設置止盈止損
- 注意資金安全

### 配置建議
- 初始價格建議設置為當前市價
- 止盈目標建議 3-5%
- 最大跌幅建議 10-15%
- 買入次數建議 3-5 次

### 運行環境
- Node.js 環境
- 穩定的網絡連接
- 足夠的系統資源

### 日誌管理
- 定期檢查日誌檔案
- 及時處理錯誤資訊
- 保留重要交易記錄

## 常見問題

### 程式無法啟動
- 檢查配置檔案格式
- 確認 API 密鑰正確
- 驗證網絡連接

### 訂單未成交
- 檢查價格設置
- 確認市場流動性
- 查看訂單狀態

### 程式異常退出
- 檢查錯誤日誌
- 驗證系統資源
- 確認網絡狀態

## 使用 AI 寫代碼的心得

這段時間使用 AI 的感受，我感覺這是一個幣圈人士必備的技能。雖然不需要懂代碼，但也不是隨便打幾個需求就能把功能寫好。

**關鍵點**：
- 需要不斷的修改 bug、迭代版本
- 整個過程還是很累，但搞定以後的滿足感十足
- 對於功能相對較為複雜的腳本，實際還是蠻大的一個挑戰
- 隨著使用越來越熟練，使用 AI 寫複雜代碼的能力也會跟著提高

**對於正在學習 AI 寫代碼的朋友和想學習的朋友，隨時歡迎交流。**

## 更新日誌

### v1.0.0
- 初始版本發佈
- 基本交易功能
- 自動重啟機制
- 日誌記錄系統
```

---

★ Insight ─────────────────────────────────────
1. **馬丁策略核心**：這個策略本質上是「越跌越買」的倉位管理，類似 DLMM LP 的抄底策略，但應用在現貨交易上
2. **自動化價值**：止盈後自動重啟、無訂單成交自動重啟等機制，讓策略能 24/7 運行，不需人工監控
3. **AI 輔助開發**：作者強調用 AI 寫代碼不是「隨便打幾個需求」就能搞定，需要不斷迭代修改 bug，這是很實際的經驗分享
─────────────────────────────────────────────────

這篇文章已整理完成，建議儲存為 `286-backpack-martingale-trading-bot.md`。內容完整保留了原文的所有細節，包括配置說明、架構設計、使用方法、常見問題等，並特別保留了作者對使用 AI 寫代碼的心得分享。
